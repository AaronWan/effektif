<?xml version="1.0" encoding="UTF-8" ?>
<definitions id="definitions"
  xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
  xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC"
  xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" 
  xmlns:effektif="effektif.com:1"
  xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
  targetNamespace="http://example.com/bpmn">
	
	<process id="vacationRequest" name="Vacation request">
	
		<startEvent id="theStart"/>
		<sequenceFlow id="theStart1" sourceRef="theStart" targetRef="lookupAllowance"/>

		<serviceTask id="lookupAllowance" effektif:type="java"/>
		<sequenceFlow id="lookupAllowance1" sourceRef="lookupAllowance" targetRef="checkAllowance"/>

		<scriptTask id="checkAllowance"/>
		<sequenceFlow id="checkAllowance1" sourceRef="checkAllowance" targetRef="approveRequest"/>


		<exclusiveGateway id="approvalFork" gatewayDirection="Diverging"/>
		<sequenceFlow id="approvalFork1" sourceRef="approvalFork" targetRef="approveRequest"/>
		<sequenceFlow id="approvalFork2" sourceRef="approvalFork" targetRef="investigateRequest"/>

			<userTask id="approveRequest" name="Approve vacation request"/>
			<sequenceFlow id="approveRequest1" sourceRef="approveRequest" targetRef="notificationFork"/>

			<callActivity id="investigateRequest"/>
			<sequenceFlow id="investigateRequest1" sourceRef="investigateRequest" targetRef="notificationFork"/>

		<exclusiveGateway id="approvalJoin" gatewayDirection="Converging"/>


		<parallelGateway id="notificationFork" gatewayDirection="Diverging"/>
		<sequenceFlow id="notificationFork1" sourceRef="notificationFork" targetRef="emailNotification"/>
		<sequenceFlow id="notificationFork2" sourceRef="notificationFork" targetRef="publishVacation"/>

			<serviceTask id="emailNotification" effektif:type="email"/>
			<sequenceFlow id="emailNotification1" sourceRef="emailNotification" targetRef="notificationJoin"/>

			<serviceTask id="publishVacation" effektif:type="http"/>
			<sequenceFlow id="publishVacation1" sourceRef="publishVacation" targetRef="notificationJoin"/>

		<parallelGateway id="notificationJoin" gatewayDirection="Converging"/>
		<sequenceFlow id="notificationJoin1" sourceRef="notificationJoin" targetRef="theEnd"/>


		<endEvent id="theEnd"/>

	</process>

</definitions>
